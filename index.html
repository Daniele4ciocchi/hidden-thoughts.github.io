<!DOCTYPE html>
<html lang="it">
<head>
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-RGJ8Q2KBP2"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){ dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-RGJ8Q2KBP2');
    </script>

    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){
        w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(), event:'gtm.js'});
        var f=d.getElementsByTagName(s)[0], j=d.createElement(s), dl=l!='dataLayer'?'&l='+l:'';
        j.async=true; j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;
        f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MPRHW8NC');</script>
    <!-- Fine Google Tag Manager -->

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hidden Thoughts</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 20px;
        }
        .message {
            margin: 10px;
            padding: 10px;
            border: 1px solid #ccc;
            display: inline-block;
            white-space: pre-line;
        }
        .error {
            color: red;
            font-weight: bold;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript>
        <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MPRHW8NC"
            height="0" width="0" style="display:none;visibility:hidden"></iframe>
    </noscript>
    <!-- Fine Google Tag Manager (noscript) -->

    <h2>Hidden Thoughts</h2>
    <input type="password" id="keyInput" placeholder="Inserisci la chiave">
    <button id="decryptButton">Decifra</button>
    <div id="messages"></div>
    <div id="error" class="error"></div>

    <script>
        const encryptedMessages = [
            { id : 1, text: "U2FsdGVkX1+MaEbaOwyQy0WKKW6cq9U8AtbVdbBPAy4dQWkkls93H6AvJ8ukNGV9PW+UoYUoD5Se9G8A4q/CpBMt/rAEIkOEhA2uJ5bp4z5Wff8QeACDxtcj0AMTp1XGdEr5qelfpokzV4kqoQqf5eajLnXxX3GkYCqp6JsAOhjfR6Sk6dIVgccAWabIJ+3B/o+M8MiL9+2S/D7yNmDRDQI20DOzq5sneSTysL4kIu8pRIZAK75aws9aeT9W433lnjR+ux9DhkFUiTfRf+reMeTXvNQxwsitADgXo/7mAcChcqo0x2zcnpIcvXh5rzDPGlmtB4qxdNlJd60pyC4cXh60HB/+XddJKOyMIEwPiy+aWAvyWBi9G4hw0rjnWH0ejRJEW3ANS4XPpekAF9J9Vx7Du7lD3XbAzOCpn9GRkMxjIRf7pco+mR38SX3QYIsF7deNRUqlDr2w9IkXt7ynHjtmzSA1lmxjbowCj4cz2ZhzzmarCempTSvjet10it49YF9wk8kJuACUx4q3bSBQKEzZekte1vujW5xQYzQA8M5sMZf74n9rVDSoHbifk5/z8fdpdILtUy1OyYGnlFXh+61dcZ9eoIPOHSW88Hf5cTC4drF4jUqbwe/noPTcDSEGDwfD1dDVO7r1q9KPAru2yHt/0TB8fLFrnyHGeTkuHGoRYBqRmr1OYmzXwK9Yoz6ygxmE2MIp48LxVy26O5HTG1G8aOVT8tUmW2KPsU9LXXtYyizTxNiiqGjcLlP2so4Q8frWvtvMHq2X0s/42cy4Bv0dWB59oyj9CMU7TiTgGbDjrmG4DC3quIISmh/EATOgXrcM1qexk0eW7me9FViCnR7XJLT4OTP7T5p6yn5y2/vxV+nGqtk1MUaoXLap8ZVLgiO5Y8TauExX2F515s6u2j8Wtr8bgrdKkq3ZBV+e+LhvlOFtTct16Vp1LwqozqPl04C5XqgEcf2Q2KRSS1iOc3gR1z94ocRN1YKzIEhVHWOY1r+uFTz/+0Pn+pYzZZja9E1IyOftqfhcQ9s3zUU8GKnt+Tm7n8NMbUsZ8StL4Y1NfU0e2VmNDZhLvWwMarnckBuN8hPbLVk2meb1Dfo52lY4hnQoUvmgZbI8ir/TMaNoEr5YOelvvIiD689A+iSDRA/rCgqDxeGDAahkfeJ5rJ5Y3hzPYaI3A0eAcKZx16LWCFPCrNx2rwytAfAKeoPfFXL1TesyRSS2QqdeC49hjiZTlvBlIxyovGXzejGHuRcQwUqA0m1cLryjSVfWap+Y2SOgOvNoDs/0CGI26+AeUNO8lJ0Hg3xDax+N2I3HHCruvaX955MtGdXpO4D9NkIGyb8ls0Z17lZrZL8IzwiyHJWYrLGhUhdqlhE6k8TQDNJPVDwPglAp+Q7JyeHPiVVApjURZq3CMC7F4JpXmtRZVBJg2aPONacncrdhE5LTcuJggd1hGR9knnFMXO69RJJNzW6KLQ6S+qNu3dEMit79eiwYMDSBUq5NFl93DosarxuMeHLLQ4hu+86yz4mRvHYpxfhCYrWMU1hV8bTmw2SSe86qgWDIBhaMio2c6mR8zmxiR9NJcMFj8HV/cROQKMxxEpGxlw1qXmKlxLvk4Jwwo348oqegPOU7UWpp3dlSLgc9EkYGMtIQBorOZwD+0qgk8XRGXPJ4zRhfZaxvxuWO9+fQD9Mc7BFWeLOa+gobYOHbdxT1dX/8K1/X0vaw2N3NVzL8mRVW0UVpFZ4NCNCAPlKV9VmS8pUymfj7QVBtpmV0pZV4p3tjAkUDUCchWfW9BxJ/GxZfQXWxSTTE1CHgp3g15VSthSAlMcBvypd3HWyuPrLlbJ3cW5elWlX7+aXasnXqovcCI3n6kYEGvcHozi2v93x8GGEkz7ExuRg9G7pq9B7VcnYH/2AQgSanSBpoANMAyDrCSobmUs63xZK/rR0nzYHbaBB2BTwQnMgdyqOITHovYdrXnK57iFxt9LOBcxTqTZ7tqTtMiWmbr8hco145hmdhFl2Gf1RRowgpTB3J7U/7N95F8itdFc+z0W84cOAIPOcv01ZhRBwOC66zWymQr7bcMIprHtUHjO4ERWKf1+IT/fPNpqT5kyG7iCsS9zm7Cgk2oz3nEILDxMef2n7kyA/pK9mMeVNr6zYKTWd1YAo0q3/3VCL9a3EQz8D1S9dq2rjHx47i41XkVjhg2qbiMryAXdcdbVRrRz6T70q4hivRrJ27hHysjIX5I3LPyAlM0g1bjgCtfjJ2EdPO6gnBTiaLB92SoXXgqPOEuLyGxG+tF5w6ISvmY8oLmakOmGkoQW86/fp7Ai9fnUllOfvJyrKDmy0F+XLhggRLitKHjOFdxPeUsARI03JPCrL7JfWyiQ9MwvuqLvmWvJeT1wsp3qhcM6OmnGIkXo1Ty104oLSjw1jRhb6vco/xg/lbJXD1E9VR49vyNzViiZhLwJc7zyI4UABkIa9eNbL/7X0N9jZjeyykrW+BGZmQEvhmEKzRuTBJGvJsHYkSihDDlQ2JGBLyyREzVGvGnnxWsT1iS3NkRW+ize0yGMblFgiWeSAYqvbkAdrOV/tdezxPRRVXBApLsnaS9V3WQ98NVMIimmP4caeGkIpZW36PA8I04ra3+YRgz8z0oh/rvYWVRGSHwAYsmJaNm2lAqhrcvM8V/nc/gDCi16922c6U/zP7OKhsAgJUVMvzXdGGQnKminLe7nTK7S3H5Kx0hZKHkyn2aymHd8cYtYaeNoW6dAtXFQOylpPLXkxi68QbL/73+GmF9MeqrCRCi+h0RPmvHNYL24E0o7B1QqADxyoCzW8XFNNxDwB6MUimjeR62sM6ZKXBtLtWVR65UCj0ATgdSuw2vXNLYF3Ti5B6VyUEs57fXc6T7x/mzYFM5ZQdOksoXSYx0Q7h/AVVcPohx/ycR0/dBY9NTo0sV9l6aJeKuwP2HIkwIFyHYRajXv/iHaa1IkisDwbO/lCZ/poKiF+7GWYhLvJo7Oghyo4wOyDcFikhKrcHyIQqwaQq7t5enRRnPcX0d2hBh3wO2rpUEahRKKW62ZZyr+jWg0iuggp2cYt13atIP/iyZ8VPbp0AKjMg1s1Vngz2yVfnrXyfc8JusitYtr8A0O7J0uchGo/Hm2utVKb7EGM2Ed5r2GOJATRpWZ0MEad+jIErztJ7BGVlv1yYt+ZXgJPh1f2BB7+nc687qNzMKDTfaZinZw3+EQ0ZUKz0vPaIyaHnLkp0KL4UQN4rvRNlIsArzwU4thRmB+aXmJZSf4Qn3SePyftrzSLn3Erb9mh9HnzWY0azh8y2fojfb0g+D87RR4Z+Z6kKdgp1i5wVjJx2lxV1HWcQcMULhTelhLBhiQZ8L1CJF5wBSh1nr5O8T2MHIFjoJP2vTzW9XKA51vzv4jLw+VX235AWhcMIDNxY9ESXO+6SrRYHTktxzgeUWgrf/OdYLTTb9WxKQx0jHZ5sb26mWRUBvxx4A8CPrl/r88QEuGofpOeAeiOaDd15UUCySt2R8kAXuHLHe52EYadPqKhaFkNpUtrNuP09tkOEzG+8wZ7q0Vl2+r7X0Aw4ye2VzAcmVgYwJQK44Zuxj62m1tXzA58LOGY1OYk10KsBxGGoWPn6+Sutr6k="}
        ];

        function decryptMessages() {
            const key = document.getElementById("keyInput").value;
            const messagesDiv = document.getElementById("messages");
            const errorDiv = document.getElementById("error");
            messagesDiv.innerHTML = "";
            errorDiv.textContent = "";

            let hasDecrypted = false;

            // Tracciamento click su Google Analytics
            gtag('event', 'click', {
                'event_category': 'button',
                'event_label': 'decrypt_button'
            });

            encryptedMessages.forEach(msg => {
                try {
                    const bytes = CryptoJS.AES.decrypt(msg.text, key);
                    const decryptedText = bytes.toString(CryptoJS.enc.Utf8);

                    if (decryptedText) {
                        const messageElement = document.createElement("div");
                        messageElement.className = "message";
                        messageElement.textContent = decryptedText;
                        messagesDiv.appendChild(messageElement);
                        hasDecrypted = true;
                    }
                } catch (error) {
                    console.error("Errore durante la decriptazione:", error);
                }
            });

            if (!hasDecrypted) {
                errorDiv.textContent = "Chiave errata o messaggi non disponibili.";
            }
        }

        document.getElementById("decryptButton").addEventListener("click", decryptMessages);
    </script>
</body>
</html>

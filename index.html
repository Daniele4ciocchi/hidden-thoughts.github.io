<!DOCTYPE html>
<html lang="it">
<head>
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-RGJ8Q2KBP2"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){ dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-RGJ8Q2KBP2');
    </script>

    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){
        w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(), event:'gtm.js'});
        var f=d.getElementsByTagName(s)[0], j=d.createElement(s), dl=l!='dataLayer'?'&l='+l:'';
        j.async=true; j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;
        f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MPRHW8NC');</script>
    <!-- Fine Google Tag Manager -->

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hidden Thoughts</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 20px;
        }
        .message {
            margin: 10px;
            padding: 10px;
            border: 1px solid #ccc;
            display: inline-block;
            white-space: pre-line;
        }
        .error {
            color: red;
            font-weight: bold;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript>
        <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MPRHW8NC"
            height="0" width="0" style="display:none;visibility:hidden"></iframe>
    </noscript>
    <!-- Fine Google Tag Manager (noscript) -->

    <h2>Hidden Thoughts</h2>
    <input type="password" id="keyInput" placeholder="Inserisci la chiave">
    <button id="decryptButton">Decifra</button>
    <div id="messages"></div>
    <div id="error" class="error"></div>

    <script>
        const encryptedMessages = [
            { id : 1, text: "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"}
        ];

        function decryptMessages() {
            const key = document.getElementById("keyInput").value;
            const messagesDiv = document.getElementById("messages");
            const errorDiv = document.getElementById("error");
            messagesDiv.innerHTML = "";
            errorDiv.textContent = "";

            let hasDecrypted = false;

            // Tracciamento click su Google Analytics
            gtag('event', 'click', {
                'event_category': 'button',
                'event_label': 'decrypt_button'
            });

            encryptedMessages.forEach(msg => {
                try {
                    const bytes = CryptoJS.AES.decrypt(msg.text, key);
                    const decryptedText = bytes.toString(CryptoJS.enc.Utf8);

                    if (decryptedText) {
                        const messageElement = document.createElement("div");
                        messageElement.className = "message";
                        messageElement.textContent = decryptedText;
                        messagesDiv.appendChild(messageElement);
                        hasDecrypted = true;
                    }
                } catch (error) {
                    console.error("Errore durante la decriptazione:", error);
                }
            });

            if (!hasDecrypted) {
                errorDiv.textContent = "Chiave errata o messaggi non disponibili.";
            }
        }

        document.getElementById("decryptButton").addEventListener("click", decryptMessages);
    </script>
</body>
</html>
